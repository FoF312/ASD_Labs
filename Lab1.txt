def check_brackets(expression):
    stack = []
    pairs = {')': '(', '}': '{', ']': '['}

    for char in expression:
        if char in ['(', '{', '[']:
            stack.append(char)
        elif char in [')', '}', ']']:
            if not stack or stack[-1] != pairs[char]:
                return False
            stack.pop()
        else:
            return False
    return len(stack) == 0

def check_single_type_brackets(expression):
    if not expression:
        return False
    open_bracket = expression[0]
    if open_bracket in '()':
        valid_chars = '()'
    elif open_bracket in '{}':
        valid_chars = '{}'
    elif open_bracket in '[]':
        valid_chars = '[]'
    else:
        return False

    for ch in expression:
        if ch not in valid_chars:
            return False

    return check_brackets(expression)

expression = input('Введите строку: ')
if any(ch not in '(){}[]' for ch in expression):
    print('Строка не существует')
else:
    if (len(set(expression) - set('()')) == 0) or (len(set(expression) - set('{}')) == 0) or (len(set(expression) - set('[]')) == 0):
        if check_single_type_brackets(expression):
            print('Строка существует')
        else:
            print('Строка не существует')
    else:
        if check_brackets(expression):
            print('Строка существует')
        else:
            print('Строка не существует')
